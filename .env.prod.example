# =============================================================================
# Production Environment Configuration
# Copy to .env.prod and fill in all values before deployment.
# =============================================================================

# Domain name (used by Caddy for automatic HTTPS via Let's Encrypt)
DOMAIN=yourdomain.com

# Database — DigitalOcean Managed PostgreSQL (VPC/private address)
# IMPORTANT: Use ssl=require (NOT sslmode=require) for asyncpg compatibility
DATABASE_URL=postgresql+asyncpg://doadmin:PASSWORD@private-db-host:25060/spotify_mcp?ssl=require

# Spotify OAuth Credentials
# Get from https://developer.spotify.com/dashboard
# IMPORTANT: Add https://yourdomain.com/auth/callback as a Redirect URI
SPOTIFY_CLIENT_ID=your_client_id
SPOTIFY_CLIENT_SECRET=your_client_secret
SPOTIFY_REDIRECT_URI=https://yourdomain.com/auth/callback

# Token Encryption Key (Fernet)
# Generate: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOKEN_ENCRYPTION_KEY=your_fernet_key

# Admin Authentication
ADMIN_AUTH_MODE=token
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
ADMIN_TOKEN=your_secure_admin_token

# CORS — must match the production domain
CORS_ALLOWED_ORIGINS=https://yourdomain.com

# Frontend
FRONTEND_AUTH_MODE=token

# Collector
COLLECTOR_INTERVAL_SECONDS=600
INITIAL_SYNC_ENABLED=true
INITIAL_SYNC_MAX_DAYS=30
INITIAL_SYNC_MAX_REQUESTS=200
INITIAL_SYNC_CONCURRENCY=2

# ZIP Import Limits
IMPORT_MAX_ZIP_SIZE_MB=500
IMPORT_MAX_RECORDS=5000000

# Rate Limiting
RATE_LIMIT_AUTH_PER_MINUTE=10
RATE_LIMIT_MCP_PER_MINUTE=60

# Log Retention
LOG_RETENTION_DAYS=90

# Google OAuth (for oauth2-proxy — admin login gate)
# Create at https://console.cloud.google.com/apis/credentials
# Set authorized redirect URI to: https://yourdomain.com/oauth2/callback
GOOGLE_OAUTH_CLIENT_ID=your_google_client_id
GOOGLE_OAUTH_CLIENT_SECRET=your_google_client_secret

# oauth2-proxy cookie encryption secret (32-byte base64-encoded)
# Generate: python -c "import os,base64; print(base64.urlsafe_b64encode(os.urandom(32)).decode())"
OAUTH2_PROXY_COOKIE_SECRET=your_cookie_secret
